<div *ngIf="producto" class="modal-flotante">
    <div class="modal-contenido p-4 rounded-4">
        <button class="btn-close" (click)="cerrarModal()"></button>

        <h2 class="text-center mb-4">Vender Producto</h2>

        <div class="p-3 border rounded shadow-sm bg-light">
            <h5 class="mb-3 fw-bold">Producto: {{ producto?.nombre }}</h5>
            <p class="mb-1">
                <span class="fw-semibold text-muted">Stock disponible: {{ producto?.cantidad }}</span>
            </p>
            <p class="mb-1">
                <span class="fw-semibold text-muted">Precio: ${{ producto?.precio | number: '1.0-0' }}</span>
            </p>
            <p *ngIf="producto?.precioDescuento" class="mb-0">
                <span class="fw-semibold text-muted">
                    Precio con descuento: ${{ producto?.precioDescuento | number: '1.0-0' }}
                </span>
            </p>
        </div>

        <!-- Formulario reactivo -->
        <form [formGroup]="ventaForm" class="mt-3">

            <div class="form-group text-start mb-3">
                <label class="form-label fw-bold">Cantidad</label>
                <input type="number" formControlName="cantidad" (input)="calcularPrecioTotal()" class="form-control"
                    step="0.01" min="0" required />
            </div>

            <div class="form-check form-switch mt-3 mb-3 text-start" *ngIf="producto?.precioDescuento">
                <input type="checkbox" class="form-check-input" formControlName="aplicarDescuento"
                    (change)="toggleDescuento()" />

                <label class="form-check-label">Aplicar descuento</label>
            </div>

            <div class="form-group text-start mb-3">
                <label class="form-label fw-bold">Valor Unitario</label>
                <input type="text" formControlName="valorUnitario" class="form-control" [disabled]="true" />
            </div>

            <div class="form-group text-start mb-3">
                <label class="form-label fw-bold">Precio Total</label>
                <input type="text" formControlName="precioTotal" class="form-control" [disabled]="true" />
            </div>

            <div class="d-flex justify-content-center gap-3 mt-4">
                <button type="button" class="btn btn-secondary" (click)="cerrarModal()">Cancelar</button>
                <button type="button" class="btn btn-primary" (click)="confirmarVenta()">Confirmar Venta</button>
            </div>
        </form>
    </div>
</div>